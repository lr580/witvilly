## 简述

当前文档版本：0522-2

项目名称：（待定，暂时起名为村官助手）

简介：帮助在乡村工作的村官更好管理信息的工具。

> 具体分为两个阶段进行实现，约定第二阶段实现的内容首次出现时用 \$ 标记。
>
> 所有只提及但不实现的内容首次出现时用 ? 标记。



## 详细分析

### 用户

#### 分类

分为两大类本质不同的用户：干部和\$村民 。

对干部继续进行分类，分为基层干部和\$高层干部。高层干部可以继续分类。干部有上下级关系，基层干部是最低级干部。

因此，用户群体可以划分为不交的村民、基层干部和高层干部，即每个用户属于且仅属于其中一类群体。

所有用户群体共有的功能有：

- 注册
- 登录
- 退出登录
- 维护用户基本信息
- ?实名认证



#### 功能细分

##### 注册

鉴于微信开发者工具接口变更，界面实现上有两种方案，优先考虑第一种方案：

1. 未登录时，若未注册，只显示注册按钮，登录按钮显示为未注册或隐藏。若已注册，只显示登录按钮，注册按钮显示为已注册或隐藏。
2. 未登录时，同时显示登录按钮和注册按钮，但未注册点击时登录按钮提示先注册；已注册时点击注册按钮提示已注册。

当前阶段，注册时不选择用户类型，默认类型为基层干部。$第二阶段，注册时必须选择用户类型。

注册时可以填写真实姓名、工作地址。

考虑到实际场合，不考虑读取及使用微信头像和昵称。



##### 登录

如果刚注册完，那么自动登录。用户退出程序不会退出登录。

如果不实现手动退出登录，那么不需要实现登录功能，可以做到自动登录。



##### 退出登录

因为小程序用户事实上与微信用户是严格一对一关系的（即设计上不允许一个微信用户使用本程序开多个小号），所以退出登录没有实质意义，但是为了完整性（即赋予用户退出登录的权利，免得显得流氓），还是考虑设计退出登录功能。



##### 维护用户基本信息

可以查看和修改的个人信息如下：

- 真实姓名 任意非标点符号和不超过30字符长度限制(考虑外国人和少数民族的特殊名字) 规定180天内只允许修改1次(考虑更名、误写、让渡账号的可能性) 必填
- 工作地址 任意字符和不超过60字符长度限制 选填
- 手机号 数字和字符`+` (考虑`+86` )，与其他用户不重复限制、符合格式限制 选填
- $个人介绍 不超过200字符长度限制 为第二阶段准备 选填
- $职务 不超过15字符长度限制 为第二阶段准备 选填
- 头像 无特殊限制 选填(有默认头像) 建议是真人头像
- $上级 选填 零到多个 主动选择或被上级选择

可以查看但不能修改的个人信息如下：

- $用户类别 第一阶段不显示 如上所述(如村民、基层干部……)
- 注册日期 年月日



##### ?实名认证

考虑到网络环境整治的大势所趋，可能被迫添加此功能。具体是否添加有待商榷，目前考虑不添加。

采用人工审核机制，实名认证通过前不允许使用信息管理功能。

具体审核办法是，让用户填写手机号。只要格式正确且未与已过审手机号重复就显示审核中。后台手动通过后显示过审。但是为了完整性可以设计不过审相关的显示。



### 信息管理

#### 基层干部

可以维护的信息包括：

- 村民信息
- 备忘录
- ?计划表
- \$政务公告
- ?文件管理

##### 村民信息

可查看、更改的包括：

- 姓名 必填 约束同上文“真实姓名”
- 头像 选填
- 性别 选填 (男/女/未填写)
- 出生日期 选填(可以精确到年/年月/年月日的任意一种)
- 收入状况 选填 一段描述性句子，限80字符
- 职业 选填 零到多个职业，每个职业限15字符
- 备注 选填
  - 富文本
  - 备注可以有若干条，每条备注标注零到多个自定义标签(标签限10字符)，标签可以任意增删改查，要求互不重复
  - 可以有限80字符的摘要 选填
  - 每条备注含录入时间和最后修改时间 系统自动填写
  - 可以选填重要程度，整数(范围是 $[0,10]$ )，从高到低排序(同重要按最后修改时间由近到远排序)，默认为 $5$ 。
- 地址 选填 零到多个地址(住所、工作场地)
- 联系方式 选填 零到多个联系方式 (例如儿童无联系方式)
- $微信号 选填 
- 分组 选填 零到多个 每个限10字符 用于搜索便利和$后续分组发通知 (例如xx家、xx家族、xx街)
- 录入时间 系统自动填写 年月日时分秒
- 最后修改时间  系统自动填写 年月日时分秒

可以按照上述信息的任意一种或多种，以任意想要的升降方式，进行多条件综合搜索与排序（文本信息支持模糊搜索，即输入多个关键字，同时拥有这些关键字的符合条件）

可以提供一些输入便利，如地址、联系方式直接与某人等同（这种联系关系可以使得一方发生修改时，另一方自动进行修改）。

?村民之间可以设置基本关系，如①父(母)子(女)关系、②夫妻关系。根据这两个关系，结合性别、年龄，可以自动计算出任意村民间的关系。



##### 备忘录

备忘录信息格式同村民信息-备注。同样支持排序和搜索。

区别在于这里的备忘录不与村民进行关联，通常是一些与个人无关的信息在此记录。且这里的限字符不超10000字符。

可以预设一些备忘录标签，如“活动”、“政务公告”。如果不实现计划表，那么增加“待办”预设标签。

?可以考虑设置附件，上传不超过10MB大小的文件，如word文档、excel表格。不支持预览。可以下载。



##### ?计划表

一个计划的基本内容：

- 名字 必填 不超20字符
- 截止时间 必填 年月日时分秒(若不填时分秒默认为`00:00:00` )
- 具体内容 选填 富文本
- 完成情况 必填 是/否
- 重要程度 选填 描述同上
- 开始日期 必填 年月日时分秒 默认当前时刻
- 提醒日期 选填 到了这个时间还未完成就发出提醒 默认还剩 15%

显示：

- 可以按日历表格显示，每个表格内有零到多个该天截止的计划和零到多个该天开始的计划 (用不同颜色等区分开) ，可以设置显示方式，如只显示开始、只显示截止、都显示。
- 可以列表显示，按截止时间(可以设置按开始)从近到远排序，同时间按重要从重到轻排序
- 可以按重要程度排序，同重要程度按截止时间(可以设置按开始)从近到远排序

可以搜索。默认不显示已完成的计划。

对提醒、逾期、一般计划予以不同的颜色，如黄、红、绿。

提醒触发时，直接在微信本体弹出消息，且进入小程序时弹窗提示。



##### \$政务公告

内容格式与备忘录相近。预设标签有所区别。

可以向村民群发政务公告，可以全选、小组内选择、自定义任意多选。群发的实现，优先考虑下面的第一种方案：

1. 直接发送到村民微信，同时在村民账号小程序内留备
2. 只发送到村民账号小程序，但在村民微信弹窗提示
3. 只发送到村民账号小程序

?可以设置收到，即看每条公告具体谁收到谁没收到，这需要检测村民是否进入了小程序点击对应公告。可以设置关联收到，对关联的若干人，一个人收到=全部人收到（如一家人）。



##### ?文件管理

类似于百度网盘。不设文件夹，因为太难实现。



##### 信息共享

村民信息独立于干部，可同时被多个干部所共同维护，类似于金山文档。

如果多个基层干部同时维护一个村民信息。那么当一个干部要添加一个已有村民时，将会发出提示，将与 xxx 干部共享该村民信息。

（对村民的备注可以不共享，也可以共享，这需要干部自行勾选）



#### \$高层干部

拥有零到多个下级。可以用与上文类似的分组思路管理下级。

可以点击查看一个下级，藉此直接查看该下级维护的所有村民信息。如果经过下级勾选同意，可以查看该下级的备忘录、计划表。

可以类比基层干部下发政务给村民的方式，将政务下发给自己的下级。同样地，可以将计划表、备忘录、村民信息下发给自己的下级。下级也可以上报自己的备忘录、计划表给上级。

默认只管理直接下级，不管理间接下级。可以手动设置管理特定范围的间接下级。

拥有基层干部的一切功能（但是可以选择不用）。



#### \$村民

当基层干部录入了自己的信息时，自己对应的基本信息会被自动填写。尚未录入时，当录入的时候会自动读取基本信息。这里的基本信息等于村民信息里的大部分信息。

能够查看所有历史和现在的政务公告。可以搜索和排序。点击进去下拉到底默认为已读。



### 辅助功能

基于所管理的信息的一些统计和分析计算。

#### ?亲属计算

计算任意村民间的亲属关系。见上文描述。



#### 财务计算

财务信息基本组成：

- 所属村民 必填
- 金额 必填 正收入，负支出
- 日期 必填 年月日
- 类型 选填 如教育、生产、生活
- 概述 选填 限50字

对每个村民(或家庭，家庭可以基于亲属关系自动计算，即夫妻+直系父(母)子(女))，可以计算他们的收支统计和细则，?并绘制简单的统计图表。可以直接计算全村的，然后衡量贫困程度。

$可以让村民也能使用，那么村民就可以自主上报财务了。



### 其他

辅助功能设立在用户板块中，包括：

- 偏好设置
- 查看帮助
- 投诉和反馈

此外，可以实现一下分享小程序功能。



#### 偏好设置

设置一些界面的默认显示方式，一些项目的自动填充偏好，以让干部更快速和高效的管理信息。



#### 查看帮助

考虑使用示意图+文字解释方式（即有手指、操作符号如箭头和真实页面做例子）。考虑在用户注册后自动进入帮助页面。

不建议使用纯文本方式。

如果时间充裕，可以设计教程，用户跟着操作后得到反馈，最后结束教程。首次进入自动播放教程。可以重播教程。



#### 投诉和反馈

调用官方投诉反馈页面，不需要自己实现